{
  "hash": "20b2e9f0c8b8fc988126db4097396399",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Network Practice\"\nformat:\n  html:\n    toc: true\n    toc-depth: 2\n    html-math-method: katex\n    code-copy: true\n    code-fold: true\n    code-tools: true\n    include-in-header:\n      - text: |\n          <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css\"/>\n    include-after-body:\n      - text: |\n          <script src=\"https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js\"></script>\n          <script>\n            const swiper = new Swiper('.swiper', {\n              loop: true,\n              spaceBetween: 30,\n              pagination: {\n                el: '.swiper-pagination',\n                clickable: true,\n              },\n              navigation: {\n                nextEl: '.swiper-button-next',\n                prevEl: '.swiper-button-prev',\n              },\n            });\n          </script>\n\nexecute:\n  warning: false\n  message: false\n  error: false\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(tidygraph)\nlibrary(ggraph)\nlibrary(igraph)\nlibrary(dplyr)\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfile_path <- \"Networksfixed.xlsx\"\n\npeople <- read_excel(file_path, sheet = \"People\")\nrelations <- read_excel(file_path, sheet = \"Relations\")\norg_chart <- read_excel(file_path, sheet = \"Sheet1\")\n```\n:::\n\n\n\n# Advior and Department Network \nThis one shows how people are connected through advisors, with departments highlighted, so we can see clusters or bridges across groups.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npeople <- read_excel(\"Networksfixed.xlsx\", sheet = \"People\")\nrelations <- read_excel(\"Networksfixed.xlsx\", sheet = \"Relations\")\n\ngraph <- tbl_graph(nodes = people, edges = relations, directed = TRUE)\n\nggraph(graph, layout = \"fr\") +\n  geom_edge_link(aes(color = Advisor), alpha = 0.8) +\n  geom_node_point(aes(color = department), size = 4) +\n  geom_node_text(aes(label = name), repel = TRUE, size = 3) +\n  theme_void() +\n  labs(title = \"Network of People & Advisor Relationships\",\n       subtitle = \"Edge color = Advisor, Node color = Department\")\n```\n\n::: {.cell-output-display}\n![](Network_Practice_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n# People–Interest Bipartite Network\nNow let’s check out who shares interests. This plot connects each person to the topics they’re into.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninterests_raw <- read_excel(\"Networksfixed.xlsx\", sheet = \"Sheet1\")\n\ninterests_long <- interests_raw %>%\n  filter(!is.na(name)) %>%\n  pivot_longer(-name, names_to = \"interest\", values_to = \"has_interest\") %>%\n  filter(has_interest == 1)  # keep only ones they have\n\npeople_nodes <- interests_long %>%\n  distinct(name) %>%\n  mutate(type = \"person\")\n\ninterest_nodes <- interests_long %>%\n  distinct(interest) %>%\n  rename(name = interest) %>%\n  mutate(type = \"interest\")\n\nnodes <- bind_rows(people_nodes, interest_nodes)\n\nedges <- interests_long %>%\n  select(from = name, to = interest)\n\ninterest_graph <- tbl_graph(nodes = nodes, edges = edges, directed = FALSE)\n\nggraph(interest_graph, layout = \"fr\") +\n  geom_edge_link(alpha = 0.5) +\n  geom_node_point(aes(color = type), size = 4) +\n  geom_node_text(aes(label = name), repel = TRUE, size = 3) +\n  theme_void() +\n  labs(title = \"Bipartite Network of People and Shared Interests\")\n```\n\n::: {.cell-output-display}\n![](Network_Practice_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n# A subset of high-interest areas to reduce clutter\nThe full interest network was a bit too messy, so I zoomed in on a few top interests \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_interests <- c(\"AI\", \"Lifting\", \"Data Science\", \"Gardening\", \"Movies\")\n\nfiltered_edges <- edges %>%\n  filter(to %in% top_interests)\n\nfiltered_nodes <- nodes %>%\n  filter(name %in% filtered_edges$from | name %in% filtered_edges$to)\n\nfiltered_graph <- tbl_graph(nodes = filtered_nodes, edges = filtered_edges, directed = FALSE)\n\nggraph(filtered_graph, layout = \"fr\") +\n  geom_edge_link(alpha = 0.7) +\n  geom_node_point(aes(color = type), size = 4) +\n  geom_node_text(aes(label = name), repel = TRUE, size = 3) +\n  theme_void() +\n  labs(title = \"Focused Network: People & Top Interests\")\n```\n\n::: {.cell-output-display}\n![](Network_Practice_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n# Combined advisor + BCB520 network chart\nThis one mixes both advisor connections and who’s in BCB520 together. It helps show not just formal mentorship links, but also who’s connected through class work.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npeople <- read_excel(\"Networksfixed.xlsx\", sheet = \"People\")\nrelations <- read_excel(\"Networksfixed.xlsx\", sheet = \"Relations\")\n\n# BCB520-based edges (only between students marked TRUE)\nbcb_edges <- people %>%\n  filter(BCB520 == TRUE) %>%\n  pull(name) %>%\n  combn(2) %>%\n  t() %>%\n  as.data.frame() %>%\n  setNames(c(\"from\", \"to\")) %>%\n  mutate(BCB520 = TRUE,\n         Advisor = FALSE)\n\n# original Advisor edges\nrelations <- relations %>%\n  mutate(Advisor = TRUE,\n         BCB520 = FALSE)\n\n# combine both edge types\nall_edges <- bind_rows(relations, bcb_edges)\n\ngraph <- tbl_graph(nodes = people, edges = all_edges, directed = FALSE)\n\nggraph(graph, layout = \"fr\") +\n  geom_edge_link(aes(color = case_when(\n    Advisor ~ \"Advisor\",\n    BCB520 ~ \"BCB520\"\n  )), alpha = 0.8, show.legend = TRUE) +\n  geom_node_point(aes(color = department), size = 4) +\n  geom_node_text(aes(label = name), repel = TRUE, size = 3) +\n  scale_edge_color_manual(\n    name = \"Relationship Type\",\n    values = c(\"Advisor\" = \"steelblue\", \"BCB520\" = \"forestgreen\")\n  ) +\n  theme_void() +\n  labs(title = \"Combined Network: Advisor & BCB520 Connections\",\n       subtitle = \"Edge color shows type of connection\")\n```\n\n::: {.cell-output-display}\n![](Network_Practice_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\n# Network layout gallery\n\nBefore settling on a final layout, I wanted to compare how different algorithms visualize the same network. \nBelow are five versions of the exact same data—just laid out differently to see structure from different angles and also makes it easier to spot patterns.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npeople <- read_excel(\"Networksfixed.xlsx\", sheet = \"People\")\nrelations <- read_excel(\"Networksfixed.xlsx\", sheet = \"Relations\")\n\nbcb_edges <- people %>%\n  filter(BCB520 == TRUE) %>%\n  pull(name) %>%\n  combn(2) %>%\n  t() %>%\n  as.data.frame() %>%\n  setNames(c(\"from\", \"to\")) %>%\n  mutate(BCB520 = TRUE, Advisor = FALSE)\n\nrelations <- relations %>%\n  mutate(Advisor = TRUE, BCB520 = FALSE)\n\nall_edges <- bind_rows(relations, bcb_edges)\n\ngraph <- tbl_graph(nodes = people, edges = all_edges, directed = FALSE)\n\nlayouts <- c(\"fr\", \"kk\", \"graphopt\", \"stress\", \"drl\")\n\ndir.create(\"plots\", showWarnings = FALSE)\n\n# generate and save each plot\nfor (lay in layouts) {\n  p <- ggraph(graph, layout = lay) +\n    geom_edge_link(aes(color = case_when(\n      Advisor ~ \"Advisor\",\n      BCB520 ~ \"BCB520\"\n    )), alpha = 0.8) +\n    geom_node_point(aes(color = department), size = 4) +\n    geom_node_text(aes(label = name), repel = TRUE, size = 3) +\n    scale_edge_color_manual(name = \"Relationship Type\",\n                            values = c(\"Advisor\" = \"steelblue\", \"BCB520\" = \"forestgreen\")) +\n    theme_void() +\n    labs(title = paste(\"Network Layout:\", lay),\n         subtitle = \"Comparing layout algorithms\")\n\n  ggsave(filename = paste0(\"plots/network_\", lay, \".png\"), plot = p, width = 10, height = 8)\n}\n```\n:::\n\n\n\n\nBelow are five different layouts for the same network. Scroll sideways to compare them.\n\n::: {style=\"overflow-x: auto; white-space: nowrap; padding: 1em; border: 1px solid #ddd; border-radius: 6px;\"}\n<img src=\"plots/network_fr.png\" style=\"height: 300px; margin-right: 10px;\"/> <img src=\"plots/network_kk.png\" style=\"height: 300px; margin-right: 10px;\"/> <img src=\"plots/network_graphopt.png\" style=\"height: 300px; margin-right: 10px;\"/> <img src=\"plots/network_stress.png\" style=\"height: 300px; margin-right: 10px;\"/> <img src=\"plots/network_drl.png\" style=\"height: 300px;\"/>\n:::\n\n# Hierarchical Interest Network\nHere's a different way to look at the interest data: as a hierarchy.\nInstead of showing people connected to interests like in a standard network, this one treats interests as the root \nand people as leaves. It gives a sense of which interests are more central and how people branch off from them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninterests_raw <- read_excel(\"Networksfixed.xlsx\", sheet = \"Sheet1\")\n\ninterest_edges <- interests_raw %>%\n  pivot_longer(-name, names_to = \"interest\", values_to = \"has_interest\") %>%\n  filter(has_interest == 1) %>%\n  select(from = interest, to = name)\n\nhierarchy_graph <- tbl_graph(edges = interest_edges, directed = TRUE)\n\nggraph(hierarchy_graph, layout = \"sugiyama\") +\n  geom_edge_link(alpha = 0.3) +\n  geom_node_point(aes(color = ifelse(name %in% interests_raw$name, \"Person\", \"Interest\")), size = 3) +\n  geom_node_text(aes(label = name), repel = TRUE, size = 3) +\n  scale_color_manual(values = c(\"Person\" = \"steelblue\", \"Interest\" = \"forestgreen\")) +\n  theme_void() +\n  labs(title = \"Interest Network (Interest → Person)\",\n       subtitle = \"Cleaner layered view using sugiyama layout\",\n       color = \"Node Type\")\n```\n\n::: {.cell-output-display}\n![](Network_Practice_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Network_Practice_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}